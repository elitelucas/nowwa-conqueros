<html>
    <head>
        <style>
            button {
                width: 200px;
            }

            textarea {
                width: 600px; 
                height: 200px;
                resize: none;
            }

            input {
                width: 200px;
                height: 20px;
            }
        </style>
        <script>
            function Init () {

            }

            var logs = [];
            var maxLogs = 10;

            function Log(log) {
                logs.push(log);
                if (logs.length > maxLogs) logs.shift();
                var output = "";
                for (var i = 0; i < logs.length; i++) {
                    output += logs[i];
                    output += '\n';
                }
                console.log(log);
                document.getElementById(`output`).innerHTML = output;
            }

            function Call (method, url, data) {
                try {
                    var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            // Typical action to be performed when the document is ready:
                            Log(xhttp.responseText);
                        }
                    };
                    xhttp.open(method, url, true);
                    xhttp.setRequestHeader('Content-Type', 'application/json');
                    if (method == "POST") {
                        xhttp.send(JSON.stringify(data));
                    } else if (method == "GET") {
                        xhttp.send();
                    }
                }
                catch (e) {
                    Log(e.message);
                }
            }

            function CallGetDefault () {
                Log('call get default...');
                Call("GET","http://localhost:9876");
            }

            function CallPostAuthenticate () {
                var username = document.getElementById('fld_username').value;
                var password = document.getElementById('fld_password').value;
                if (username.length == 0) {  
                    return Log('username cannot be empty!');
                }
                if (password.length == 0) {  
                    return Log('password cannot be empty!');
                } 
                Log('call post authenticate...');
                Call("POST","http://localhost:9876/authenticate", {username:username, password:password});
            }

            function CallPostRegister () {
                var username = document.getElementById('fld_username').value;
                var password = document.getElementById('fld_password').value;
                var repassword = document.getElementById('fld_repassword').value;
                if (username.length == 0) {  
                    return Log('username cannot be empty!');
                }
                if (password.length == 0) {  
                    return Log('password cannot be empty!');
                } 
                if (repassword != password) {  
                    return Log('password mismatch!');
                }
                Log('call post register...');
                Call("POST","http://localhost:9876/register", {username:username, password:password});
            }

            function GetField () {
                
            }

            window.onload = Init;
        </script>
    </head>
    <body>
        <textarea id="output"></textarea>
        <br/><button onclick="CallGetDefault();">Default</button>
        <br/><button onclick="CallPostAuthenticate();">Authenticate</button><input placeholder="username" id="fld_username" type="text"><input placeholder="password" id="fld_password" type="password">
        <br/><button onclick="CallPostRegister();">Register</button><input placeholder="retype password" id="fld_repassword" type="password">
    </body>
</html>